\ProvidesPackage{UoN}[2024/08/22 Beamer Theme for the UoN, UNNC and UNUM by Yanxi Jiang.] 
% This file was modified from the PolyU Beamer Slides and coded by Crumble Jon, 
% https://www.overleaf.com/latex/templates/polyu-beamer-slides/pyhhgmgmvzhg
% The author would like to thank LaTeX source code provider Rui Song and the author Crumble Jon from the Hong Kong Polytechnic University,  Hong Kong Special Administrative Region (HKSAR), China.
% This beamer follows the visual identity of the University of Nottingham (UoN), the University of Nottingham Ningbo China (UNNC), and is also allowed used by the University of Nottingham Malaysia (UNM).
% https://www.nottingham.ac.uk/brand/visual/ 
% https://www.nottingham.edu.cn/en/brand/visual-identity.aspx 
% https://www.nottingham.edu.cn/en/brand/documents/nottingham-brand-book-en-240313.pdf
% Please use XeLaTex engine.

% ================================================================================
% Packages
% ================================================================================

\RequirePackage{tikz}
\RequirePackage{xcolor}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{verbatim}
\RequirePackage{hyperref}
\RequirePackage{listings}
\RequirePackage{fontspec}
\setmainfont{Arial}

% ================================================================================
% Color Accents
% ================================================================================

\definecolor{NottinghamBlue}{HTML}{10263B}
\definecolor{MalaysiaSkyBlue}{HTML}{009BC1}

\setbeamercolor{title}{fg=white}
\setbeamercolor{author}{fg=white}
\setbeamercolor{date}{fg=white}
\setbeamercolor{head}{bg=MalaysiaSkyBlue}

\setbeamercolor{alerted text}{fg=red}
\setbeamercolor{normal text}{fg=NottinghamBlue,bg=white}
\setbeamercolor{structure}{fg=NottinghamBlue}

\setbeamercolor{jumbo}{bg=NottinghamBlue}
\setbeamercolor{progress bar}{fg=MalaysiaSkyBlue,bg=NottinghamBlue}
\setbeamercolor{progress bar progress}{use=progress bar,bg=progress bar.fg}

\hypersetup{
	colorlinks,
	linkcolor=NottinghamBlue,
	anchorcolor=red,
	citecolor=blue!80,
	urlcolor=MalaysiaSkyBlue
,
}

% ================================================================================
% Fonts
% ================================================================================

\setbeamerfont{author}{size=\small}
\setbeamerfont{date}{size=\footnotesize}
\setbeamerfont{title}{series=\bfseries, size=\Large}
\setbeamerfont{subtitle}{series=\mdseries,size=\normalsize}

\setbeamerfont{frametitle}{series=\bfseries}
\setbeamerfont{framesubtitle}{series=\mdseries}
\setbeamerfont{footline}{size=\scriptsize}
\setbeamerfont{block title}{series=\centering, size=\small}
\setbeamerfont{block body}{size=\scriptsize}

\usefonttheme{serif}

% ================================================================================
% Basic Settings
% ================================================================================

%background
%\beamertemplateshadingbackground{white}{blue!10}

%\setbeamertemplate{footline}[frame number]

% cancel navigation symbols
%\setbeamertemplate{navigation symbols}{}

% prettier boxes
\setbeamertemplate{blocks}[rounded]

% bullet points
\setbeamertemplate{itemize item}{\textbullet}
\setbeamertemplate{itemize subitem}{\textemdash}
\setbeamertemplate{itemize subsubitem}{\ensuremath{\circ}}

% paragraph spacing
\setlength{\parskip}{8pt}

% code environment
\lstdefinestyle{mystyle}{
    commentstyle=\color{MalaysiaSkyBlue},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{red},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\scriptsize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=4,
    xleftmargin=10pt,
    xrightmargin=10pt,
}
\lstset{style=mystyle}

% ================================================================================
% Slide Templates
% ================================================================================

% headline for all frames
\setbeamertemplate{headline}{
	\ifnum\theframenumber=1
		% not display the headline for the title page
	\else			
\begin{beamercolorbox}[wd=\paperwidth,ht=40pt]{head}
                  %\hspace{337pt}\includegraphics[scale=0.21]{source/UoN_Nottingham_Blue_white_text_logo_RGB} 
                  %\hspace{339pt}\includegraphics[scale=0.48]{source/UoN}
                  \hspace{338pt}\includegraphics[scale=0.202]{source/Nottingham_logo_all_white} 
\vspace{1pt}
		\end{beamercolorbox}
	\fi
}

% frame title and subtitle
\setbeamertemplate{frametitle}{
    \begin{picture}(0,0)
        \ifx\insertframesubtitle\@empty%
            \put(0,25){\usebeamerfont{frametitle}\usebeamercolor[fg]{title}\insertframetitle}%
		\else%
			\put(0,32){\usebeamerfont{frametitle}\usebeamercolor[fg]{title} \insertframetitle}%
			\put(2,19){\usebeamerfont{framesubtitle}\usebeamercolor[fg]{title} \insertframesubtitle }
		\fi
    \end{picture}
}

% title page
\setbeamertemplate{title page}{
	\begin{picture}(0,0)
		\put(-18, 70){\includegraphics[scale=0.18]{source/UoN_Nottingham_Blue_Single_Color_logo_RGB}}
        \put(-5,-77){
            \begin{beamercolorbox}[wd=1.1\paperwidth,ht=140pt]{jumbo}
            \end{beamercolorbox}
        }
		\put(0,25){%
			\begin{minipage}{300pt}
				\usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle\par
				\vspace{10pt}
				\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle
			\end{minipage}
		}
		\put(0,-45){%
			\usebeamerfont{author}\usebeamercolor[fg]{author}\insertauthor
		}
		\put(0,-60){%
			\usebeamerfont{date}\usebeamercolor[fg]{date}\insertdate
		}
	\end{picture}
}

\defbeamertemplate{footline}{progress bar}{
	\dimen0=\paperwidth
	\multiply\dimen0 by \insertframenumber
	\divide\dimen0 by \inserttotalframenumber
	\edef\progressbarwidth{\the\dimen0}
	\leavevmode%
	\ifnum\theframenumber=1
	\else
		\begin{beamercolorbox}[wd=\paperwidth,ht=2pt,dp=1pt]{progress bar}
			\begin{beamercolorbox}[wd=\progressbarwidth,ht=2pt,dp=1pt]{progress bar progress}
			\end{beamercolorbox}%
		\end{beamercolorbox}%
	\fi
}

\setbeamertemplate{footline}[progress bar]

\addtobeamertemplate{navigation symbols}{}{%
    \usebeamerfont{footline}%
    \usebeamercolor[fg]{footline}%
    \hspace{1em}%
    \insertframenumber/\inserttotalframenumber
}

%last frame
\newcommand{\lastframe}{
	\begingroup
	\setbeamertemplate{headline}{}
	\setbeamertemplate{footline}{}
      \beamertemplateshadingbackground{NottinghamBlue}{NottinghamBlue}
	\begin{frame}[c]{}
      \begin{picture}(0,0)
		\put(-18,62){\includegraphics[scale=0.18]{source/UoN_Nottingham_Blue_white_text_logo_RGB}}
      \end{picture}

     \LARGE{\textbf{\centerline{\textcolor{white}{Thanks}}}}

	\end{frame}
\endgroup
}

% style of sections and subsections in ToCs
\setbeamertemplate{section in toc}{
	$\blacktriangleright$~\inserttocsection
}
\setbeamertemplate{subsection in toc}{}
\setbeamertemplate{frametitle continuation}{}

% begin of sections
\AtBeginSection[]
{
    \begingroup
    \begin{frame}{Contents}{}
        \tableofcontents[currentsection]
    \end{frame}
    \endgroup
}